![状态机图](http://git.kongtrolink.com:3000/luoc/Scloud_3dDataCenter/raw/master/documentation/20170331102451.png)

## 用户状态：
### 1.正常
* 可用操作：
    1. 新建
    2. (选择)
* 进出入方法：
    1. 进
        1. 设置待选物体列表为可交互的物体
    2. 出

### 2.选择
* 可用操作：
    1. 移动
    2. 旋转
    3. 删除
    4. (选择)
* 进出入方法
    1. 进
        1. 设置待选物体列表为可交互的物体
    2. 出

### 3.移动
* 可用操作：
    1. (取消移动)
    2. (确认移动)
* 属性：isNew来自新建/移动
* 进出入方法
    1. 进
        1. 设置待选物体列表为地面
        1. 绑定鼠标事件
            1. Mousemove
                + 判断地面选区是否合法
                + 对地板设置高亮
                + 移动Mesh
            1. MouseClick
                + 新建设备
    1. 出
        1. 解除绑定鼠标事件
            + Mousemove
            + Mousedown

## 操作：
### 1.新建
+ 是
    1. 清除示例物体
    1. 新建示例物体
    1. 设置示例物体状态：移动中
    1. 设置用户状态：移动

### 2.移动
+ 是
    1. 保存已选择物体信息
    1. 删除已选择物体
    1. 新建示例物体
    1. 设置示例物体状态：移动中
    1. 设置用户状态：移动

### 3.旋转
+ 是
    1. 旋转90°

### 4.删除
+ 是
    1. 删除已选择的物体
    1. 设置用户状态为正常
+ 取消

### 5.(选择)
+ 成功
    1. 设置被选择物体状态：被选择
    1. 设置用户状态：选择
+ 失败
    1. 设置被选择物体状态：正常
    1. 设置用户状态：正常

### 6.(确认移动)
+ 来自新建
    1. 删除示例物体
    1. 新建物体
    1. 设置物体信息
    1. 设置物体状态：被选择
    1. 设置用户状态：选择
+ 来自移动
    1. 删除示例物体
    1. 新建已选择物体
    1. 加载已选择物体的信息
    1. 设置物体状态：被选择
    1. 设置用户状态：选择

### 7.(取消移动)
+ 来自新建
    1. 删除示例物体
    1. 设置用户状态：正常
+ 来自移动
    1. 删除示例物体
    1. 还原已选择物体
    1. 加载已选择物体的信息
    1. 设置被选择物体状态：被选择
    1. 设置用户状态：选择

## 物体状态：
### 1.移动中
+ 进
    1. hook：```beforeMoving()```
    2. 设置自身透明度 ```Mesh.setOpacity()```
+ 出
    3. 设置自身透明度 ```Mesh.setOpacity(1)```
    4. hook：```beforeCancelMoving()```

### 2.被选择
+ 进
    1. hook：```beforeSelected()```
    1. 高亮 ```Mesh.highlight()```
    1. 弹出GUI(设备信息)  ```showDeviceInfo()```
+ 出
    1. 去掉高亮 ```Mesh.unHeilight()```
    1. 隐藏GUI（设备信息)  ```hideDeviceInfo()```
    1. hook：```beforeCancelSelected()```

### 3.正常
